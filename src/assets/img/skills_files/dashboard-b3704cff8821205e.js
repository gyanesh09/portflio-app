(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{91015:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return n(26060)}])},26060:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var r=n(47568),o=n(41799),a=n(69396),s=n(10092),i=n(85893),c=n(10682),l=n(34051),d=n(35005),u=n(31555),p=n(9669),h=n.n(p),m=n(8100),x=n(11163),f=n(72132),g=n(67294),w=n(43081),j=n(64753),_=n(62255),y=n(25675),v=n.n(y),C=n(30381),b=n.n(C),Z=n(45697),k=n.n(Z),N=n(74231),A=n(23358),E=n.n(A),T=n(99534),L=n(828),R=n(95944),S=n(43489),F=n(63985),P=(0,g.forwardRef)((function(e,t){var n=e.id,r=e.children,s=e.placement,c=e.tooltipText,l=e.onClick,u=(0,T.Z)(e,["id","children","placement","tooltipText","onClick"]),p=(0,L.Z)((0,F.Z)(!1),2),h=p[0],m=p[1];return(0,i.jsx)(R.Z,{placement:s,overlay:(0,i.jsx)(S.Z,{id:"".concat(n,"-tooltip"),children:c}),onToggle:m,show:h,children:(0,i.jsx)(d.Z,(0,a.Z)((0,o.Z)({ref:t,id:n,onClick:function(e){m(!1),l&&l(e)}},u),{children:r}))})}));P.propTypes={id:k().string.isRequired,children:k().any.isRequired,onClick:k().func,placement:k().string,tooltipText:k().oneOfType([k().node,k().string]).isRequired},P.defaultProps={placement:"bottom",onClick:null};var D=P,I=n(84967),O=n(42985),W=n(5844),Y=n(5056),q=function(e){var t=e.id,n=e.title,a=e.updatedAt,c=e.onDelete,d=e.type,p=e.refetch,m=(0,g.useState)(!1),w=m[0],j=m[1],y=(0,x.useRouter)(),C=function(){var e=(0,r.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:e.stopPropagation(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,navigator.clipboard.writeText("".concat("https://www.freewordcloudgenerator.com","/generatewordcloud?id=").concat(t))];case 2:return n.sent(),(0,f.Am)((0,i.jsx)(Y.x,{message:"Link copied!"}),{autoClose:2e3,type:"success"}),[3,4];case 3:return n.sent(),(0,f.Am)((0,i.jsx)(Y.b,{message:"Couldn't copy link"}),{autoClose:2e3,type:"error"}),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Z=function(e){e.stopPropagation(),sessionStorage.removeItem("wordcloud"),y.push("/generatewordcloud?id=".concat(t))},k=function(){var e=(0,r.Z)((function(e){var a,c;return(0,s.__generator)(this,(function(l){switch(l.label){case 0:return(a=e.wordcloud_title)&&a!==n?((c={}).title=a,[4,h().put("/api/wordcloud",(0,o.Z)({id:t},c)).then((0,r.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,p()];case 1:return e.sent(),(0,f.Am)((0,i.jsx)(Y.x,{message:"Successfully Saved"}),{autoClose:2e3,type:"success"}),[2]}}))}))).catch((function(){(0,f.Am)((0,i.jsx)(Y.b,{message:"There was an error"}),{autoClose:2e3,type:"error"})}))]):[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.Z,{onClick:Z,className:"".concat(E().container," border-0 rounded-sm w-100 mt-3"),children:(0,i.jsx)(_.Z.Body,{children:(0,i.jsxs)(l.Z,{children:[(0,i.jsxs)(u.Z,{children:[(0,i.jsx)("div",{className:"".concat(E().title," text-center text-sm-left"),children:(0,i.jsx)(W.Z,{onSubmit:k,name:"wordcloud_title",initialValue:n,validationSchema:N.Ry().shape({wordcloud_title:N.Z_().max(70,"Name must be at most 70 characters").trim().required("Required")})})}),(0,i.jsxs)("div",{className:"".concat(E().caption," d-flex text-gray-dark fs-caption text-center text-sm-left mt-2 mb-0"),children:[(0,i.jsxs)("div",{className:"mr-2",children:["text"===d&&(0,i.jsx)(v(),{src:"/images/text_icon.svg",width:18,height:18,alt:"type icon"}),"yt"===d&&(0,i.jsx)(v(),{src:"/images/yt_icon_purple.svg",width:18,height:18,alt:"type icon",className:"mr-1"})]}),"Last edited on ",b()(a).format("dddd, MMMM Do, YYYY")]})]}),(0,i.jsxs)(u.Z,{className:"d-flex justify-content-end",children:[(0,i.jsxs)(D,{id:"copy-link-to-".concat(t),tooltipText:"Copy Link",variant:"link",className:"shadow-none",onClick:C,style:{color:"#8593A3",fontWeight:600,textDecoration:"none"},children:[(0,i.jsx)(I.vU,{})," COPY LINK"]}),(0,i.jsxs)(D,{id:"edit-".concat(t),tooltipText:"Edit Wordcloud",variant:"link",className:"shadow-none",onClick:Z,style:{color:"#8593A3",fontWeight:600,textDecoration:"none"},children:[(0,i.jsx)(I.yl,{})," EDIT"]}),(0,i.jsx)(D,{id:"delete-".concat(t),tooltipText:"Delete Wordcloud",variant:"link",className:"shadow-none",onClick:function(e){e.stopPropagation(),j(!0)},children:(0,i.jsx)(I.Fz,{fill:"#ED5962"})})]})]})})}),(0,i.jsx)(O.Z,{show:w,handleClose:j,onSubmit:function(){c(t),j(!1)},size:"md",submitText:"CONFIRM",children:(0,i.jsxs)("div",{className:"p-2",children:[(0,i.jsx)("h5",{children:"Are you sure you want to delete this wordcloud?"}),(0,i.jsx)("p",{className:"text-gray-dark",children:"The wordcloud will no longer appear in your dashboard and all data associated with it will be lost."})]})})]})};q.propTypes={id:k().string,title:k().string,updatedAt:k().string,onDelete:k().func,type:k().string,refetch:k().func};var M=q,z=n(79614),X=n.n(z),B=n(53843),V=n(67062),U=n(33299);var G=function(e){return function(t){var n=(0,g.useState)(!1),r=n[0],a=n[1],s=(0,U.useSession)(),c=s.data,l=s.status,d=(0,x.useRouter)();return(0,g.useEffect)((function(){c&&a(!0),c||"authenticated"===l||"loading"===l||d.push("/")}),[c,l]),r?(0,i.jsx)(e,(0,o.Z)({},t)):(0,i.jsx)(i.Fragment,{})}},H=function(e){return h().get(e).then((function(e){return e.data})).catch((function(e){var t=e.response,n=t.data.error,r=t.status,o=new Error("string"===typeof n?n:e.message);throw o.status=r,o}))},J=function(){var e=(0,m.ZP)("/api/wordcloud",H,{errorRetryCount:5}),t=e.data,n=e.error,p=(0,g.useState)("Last Created"),_=p[0],y=p[1],v=(0,x.useRouter)();n&&401===n.status&&v.reload();var C=function(){var e=(0,r.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,m.JG)("/api/wordcloud")];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)((function(e){return(0,s.__generator)(this,(function(t){return h().delete("/api/wordcloud",{data:{id:e}}).then((function(){C(),(0,f.Am)((0,i.jsx)(Y.x,{message:"Successfully deleted"}),{type:"success",autoClose:2e3})})).catch((function(){(0,f.Am)((0,i.jsx)(Y.x,{message:"Error"}),{type:"error",autoClose:2e3})})),[2]}))}));return function(t){return e.apply(this,arguments)}}(),Z=null===t||void 0===t?void 0:t.wordclouds.sort((function(e,t){return function(e,t,n){return"Last Created"===e?t.createdAt<n.createdAt?1:t.createdAt>n.createdAt?-1:0:"Last Edited"===e?t.updatedAt<n.updatedAt?1:t.updatedAt>n.updatedAt?-1:0:"A-Z"===e?t.title.toLowerCase()<n.title.toLowerCase()?-1:t.title.toLowerCase()>n.title.toLowerCase()?1:0:"Z-A"===e?t.title.toLowerCase()<n.title.toLowerCase()?1:t.title.toLowerCase()>n.title.toLowerCase()?-1:0:void 0}(_,e,t)})).map((function(e,t){return(0,i.jsx)(M,{id:e._id,title:e.title,updatedAt:e.updatedAt,type:e.type,onDelete:b,refetch:C},t)})),k={option:function(e,t){var n=t.isSelected;return(0,a.Z)((0,o.Z)({},e),{fontFamily:"Work Sans",borderRadius:0,paddingTop:"4px",paddingBottom:"4px",backgroundColor:n?"#E9ECEF !important":"#FFFFFF",backgroundImage:n?"url('/images/check_purple.svg') !important":"none",backgroundRepeat:"no-repeat !important",backgroundPosition:"90% center !important","&:hover":{backgroundColor:"#E3ECF3 !important"}})}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V.Z,{}),(0,i.jsx)(w.Z,{children:(0,i.jsxs)(c.Z,{className:"".concat(X().container," bg-gray-light rounded px-5 rounded-lg pb-4"),children:[(0,i.jsx)(l.Z,{className:"justify-content-center justify-content-md-start",children:(0,i.jsx)(d.Z,{variant:"outline-primary",className:"btn rounded-pill mt-4",onClick:function(){sessionStorage.removeItem("wordcloud"),v.push("/generatewordcloud")},children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)("span",{className:"".concat(X().buttonPlusIcon," mr-2")}),"CREATE NEW WORD CLOUD"]})})}),(0,i.jsx)(l.Z,{className:"mt-3 mt-md-0",children:(0,i.jsx)(u.Z,{children:(0,i.jsxs)("div",{className:"d-flex justify-content-center justify-content-md-end align-items-center flex-wrap mt-2 mt-sm-0",children:[(0,i.jsx)("div",{className:"".concat(X().filterText," text-nowrap"),children:"SORT BY"}),(0,i.jsx)(B.Z,{options:[{value:"Last Created",label:"Last Created"},{value:"Last Edited",label:"Last Edited"},{value:"A-Z",label:"A-Z"},{value:"Z-A",label:"Z-A"}],className:"".concat(X().selectContainer," select__container ml-3"),styles:k,value:_,setValue:y})]})})}),(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(u.Z,{}),(0,i.jsx)(u.Z,{})]}),(0,i.jsx)(l.Z,{children:Z})]})}),(0,i.jsx)(j.Z,{})]})};J.propTypes={user:k().object};var K=G(J)},23358:function(e){e.exports={container:"wordcloudCard_container__RLmt9",title:"wordcloudCard_title__gxtEv",caption:"wordcloudCard_caption__7lbtb"}},79614:function(e){e.exports={container:"dashboard_container__XDa4z",buttonPlusIcon:"dashboard_buttonPlusIcon__E16k1",filterText:"dashboard_filterText__Hno_l",selectElement:"dashboard_selectElement__5IXVz",selectContainer:"dashboard_selectContainer__4kIPb"}}},function(e){e.O(0,[885,548,517,19,988,624,774,888,179],(function(){return t=91015,e(e.s=t);var t}));var t=e.O();_N_E=t}]);